const States = {
  AZ: {
    fillKey: "defaultFill",
    stateName: "Arizona",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  CO: {
    fillKey: "broughtByOpponent",
    stateName: "Colorado",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  DE: {
    fillKey: "defaultFill",
    stateName: "Delaware",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  FL: {
    fillKey: "defaultFill",
    stateName: "Florida",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  GA: {
    fillKey: "defaultFill",
    stateName: "Georgia",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  HI: {
    fillKey: "defaultFill",
    stateName: "Hawaii",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  ID: {
    fillKey: "defaultFill",
    stateName: "Idaho",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  IL: {
    fillKey: "defaultFill",
    stateName: "Illinois",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  IN: {
    fillKey: "defaultFill",
    stateName: "Indiana",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  IA: {
    fillKey: "defaultFill",
    stateName: "Iowa",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  KS: {
    fillKey: "defaultFill",
    stateName: "Kansas",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  KY: {
    fillKey: "defaultFill",
    stateName: "Kentucky",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  LA: {
    fillKey: "defaultFill",
    stateName: "Louisiana",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  MD: {
    fillKey: "defaultFill",
    stateName: "Maryland",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  ME: {
    fillKey: "defaultFill",
    stateName: "Maine",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  MA: {
    fillKey: "defaultFill",
    stateName: "Massachusetts",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  MN: {
    fillKey: "defaultFill",
    stateName: "Minnesota",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  MI: {
    fillKey: "defaultFill",
    stateName: "Michigan",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  MS: {
    fillKey: "defaultFill",
    stateName: "Mississippi",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  MO: {
    fillKey: "defaultFill",
    stateName: "Missouri",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  MT: {
    fillKey: "defaultFill",
    stateName: "Montana",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  NC: {
    fillKey: "defaultFill",
    stateName: "North Carolina",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  NE: {
    fillKey: "defaultFill",
    stateName: "Nebraska",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  NV: {
    fillKey: "defaultFill",
    stateName: "Nevada",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  NH: {
    fillKey: "defaultFill",
    stateName: "New Hampshire",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  NJ: {
    fillKey: "defaultFill",
    stateName: "New Jersey",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  NY: {
    fillKey: "defaultFill",
    stateName: "New York",
    resourceCost: 10,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  ND: {
    fillKey: "defaultFill",
    stateName: "North Dakota",
    resourceCost: 20,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  NM: {
    fillKey: "defaultFill",
    stateName: "New Mexico",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  OH: {
    fillKey: "defaultFill",
    stateName: "Ohio",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  OK: {
    fillKey: "defaultFill",
    stateName: "Oklahoma",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  OR: {
    fillKey: "defaultFill",
    stateName: "Oregon",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  PA: {
    fillKey: "defaultFill",
    stateName: "Pennsylvania",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  RI: {
    fillKey: "defaultFill",
    stateName: "Rhode Island",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  SC: {
    fillKey: "defaultFill",
    stateName: "South Carolina",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  SD: {
    fillKey: "defaultFill",
    stateName: "South Dakota",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  TN: {
    fillKey: "defaultFill",
    stateName: "Tennessee",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  TX: {
    fillKey: "defaultFill",
    stateName: "Texas",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  UT: {
    fillKey: "defaultFill",
    stateName: "Utah",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  WI: {
    fillKey: "defaultFill",
    stateName: "Wisconsin",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  VA: {
    fillKey: "defaultFill",
    stateName: "Virginia",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  VT: {
    fillKey: "defaultFill",
    stateName: "Vermont",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  WA: {
    fillKey: "defaultFill",
    stateName: "Washington",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  WV: {
    fillKey: "defaultFill",
    stateName: "West Virginia",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  WY: {
    fillKey: "defaultFill",
    stateName: "Wyoming",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  CA: {
    fillKey: "defaultFill",
    stateName: "California",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  CT: {
    fillKey: "defaultFill",
    stateName: "Connecticut",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  AK: {
    fillKey: "defaultFill",
    stateName: "Alaska",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  AR: {
    fillKey: "defaultFill",
    stateName: "Arizona",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  },
  AL: {
    fillKey: "defaultFill",
    stateName: "Alabama",
    resourceCost: 15,
    ownedBy: "Rockefeller",
    isOwned: true
  }
};

const map = new Datamap({
  element: document.getElementById("container"),
  scope: "usa",
  done: function(datamap) {
    datamap.svg.selectAll(".datamaps-subunit").on("click", geography => {
      changeOwnership(geography);
      setLandColor(geography);
    });
  },
  geographyConfig: {
    highlightBorderColor: "#bada55",
    popupTemplate: function(land, data) {
      const i = `<div class="hoverinfo">${land.properties.name}
      Resource Cost: ${data.resourceCost} `;
      return i;
    },
    popupOnHover: true,
    highlightBorderWidth: 3
  },
  fills: {
    // notBrought: "#D3D3D3",
    broughtByPlayer: "#228B22",
    broughtByOpponent: "#B22222",
    //Grey
    defaultFill: "#D3D3D3"
  },
  data: States
});

function changeOwnership(geography) {
  const stateTarget = geography.id;
  if (States[stateTarget].isOwned === false) {
    States[stateTarget].isOwned = true;
  } else if (States[stateTarget].isOwned === true) {
    States[stateTarget].isOwned = false;
  }
}

function setLandColor(geography) {
  const stateTarget = geography.id;
  if (States[stateTarget].isOwned === true) {
    if (States[stateTarget].ownedBy === "Rockefeller") {
      States[stateTarget].fillKey = "broughtByPlayer";
    } else {
      States[stateTarget].fillKey = "broughtByOpponent";
    }
  } else {
    States[stateTarget].fillKey = "defaultFill";
  }

  console.log(States[stateTarget].fillKey);
  map.updateChoropleth(States, { reset: false });
}
